**第8章 输入验证**

本章主要介绍了如何使用PyInputPlus模块进行输入验证。

**1. 输入验证的重要性**

输入验证是检查用户输入值的格式是否正确的过程。例如，如果你希望用户输入年龄，那么代码不应该接受无意义的答案，例如负数（超出可接受的整数范围）或单词（数据类型错误）。输入验证还可以防止错误或安全漏洞。

**2. PyInputPlus模块**

PyInputPlus是一个Python模块，它提供了一系列函数来接受和验证用户的输入。这些函数类似于内置的 `input()` 函数，但具有更多的验证功能。如果用户输入的内容无效（例如，格式错误的日期或超出预期范围的数字），PyInputPlus会再次提示用户输入。

下表列出了PyInputPlus模块的一些主要函数：

| 函数              | 描述                                                         |
| ----------------- | ------------------------------------------------------------ |
| `inputStr()`      | 类似于内置的 `input()` 函数，接受字符串输入。                |
| `inputNum()`      | 确保用户输入数字并返回整数或浮点数。                         |
| `inputChoice()`   | 确保用户输入预设选项之一。                                   |
| `inputMenu()`     | 提供一个带有数字或字母选项的菜单，确保用户输入菜单中的选项。 |
| `inputDatetime()` | 确保用户输入日期和时间。                                     |
| `inputYesNo()`    | 确保用户输入 "yes" 或 "no"。                                 |
| `inputBool()`     | 确保用户输入 "True" 或 "False"，并返回一个布尔值。           |
| `inputEmail()`    | 确保用户输入有效的电子邮件地址。                             |
| `inputFilepath()` | 确保用户输入有效的文件路径和文件名。                         |
| `inputPassword()` | 类似于内置的 `input()`，但在用户输入时显示星号，以隐藏敏感信息。 |
| `inputCustom()`   | 接受一个自定义的验证函数，用于更复杂的验证需求。             |

**3. PyInputPlus模块的关键字参数**

PyInputPlus函数支持一些关键字参数，用于更详细地控制输入的验证。

下表列出了一些常用的关键字参数：

| 关键字参数                              | 描述                                                         |
| --------------------------------------- | ------------------------------------------------------------ |
| `min`, `max`, `greaterThan`, `lessThan` | 用于指定有效值的范围。                                       |
| `blank`                                 | 默认情况下不允许输入空格字符，除非将 `blank` 设置为 `True`。 |
| `limit`, `timeout`, `default`           | 用于控制函数在达到尝试次数限制或超时后的行为。               |
| `allowRegexes`, `blockRegexes`          | 使用正则表达式列表来确定哪些输入应被接受或拒绝。             |



**4. 自定义验证函数**

你可以编写函数以执行自定义的验证逻辑，并将函数传递给 `inputCustom()`。

**5. 实践项目**

本章提供了两个实践项目：三明治机和编写自己的乘法测验。这两个项目都需要使用到PyInputPlus模块的功能。

**6. 小结**

虽然很容易忘记编写输入验证代码，但是没有它，你的程序几乎会存在bug。你期望用户输入的值和他们实际输入的值可能完全不同，你的程序必须足够健壮，能处理这些特殊情况。可以使用正则表达式来创建自己的输入验证代码，但在常见情况下，使用现有模块（例如PyInputPlus）会更容易。